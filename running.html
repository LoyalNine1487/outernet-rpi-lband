

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Running the software stack &mdash; Outernet L-band on Rasbian 1.0.dev1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Outernet L-band on Rasbian 1.0.dev1 documentation" href="index.html"/>
        <link rel="prev" title="Software installation" href="install.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Outernet L-band on Rasbian
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Software installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Running the software stack</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#screen-basics">screen basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-the-programs">Running the programs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-demodulator">Running the demodulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-decoder">Running the decoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#starting-the-indexer">Starting the indexer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#starting-the-web-ui">Starting the web UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detaching-from-the-screen-session">Detaching from the screen session</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Outernet L-band on Rasbian</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Running the software stack</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/running.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-the-software-stack">
<h1>Running the software stack<a class="headerlink" href="#running-the-software-stack" title="Permalink to this headline">¶</a></h1>
<p>Although the individual commands can be run directly in the terminal, we will
use screen so the programs can be run in the background even after we log out
of the system.</p>
<div class="section" id="screen-basics">
<h2>screen basics<a class="headerlink" href="#screen-basics" title="Permalink to this headline">¶</a></h2>
<p>Screen is a terminal multiplexer. Once started, you will be in a shell that
does not look much different than the normal shell. The special key combination
Ctrl-A can be used to give special screen-specific commands.</p>
<p>To create more shells (called &#8216;windows&#8217;), press Ctrl-A Ctrl-C. To switch
between open shells, use Ctrl-A Ctrl-A (switches between the current and last
used shell), or Ctrl-A Ctrl-&#8216; to get a list of shells to switch to.</p>
<p>To exit screen without closing any of the open shells, press Ctrl-A Ctrl-D. To
reattach to the closed shells, run screen with <code class="docutils literal"><span class="pre">screen</span> <span class="pre">-rD</span></code> command.</p>
<p>Type <code class="docutils literal"><span class="pre">man</span> <span class="pre">screen</span></code> for complete usage documentation and/or use Ctrl-A Ctrl-?
to get information about screen shortcuts.</p>
</div>
<div class="section" id="running-the-programs">
<h2>Running the programs<a class="headerlink" href="#running-the-programs" title="Permalink to this headline">¶</a></h2>
<p>Programs are run in this order:</p>
<ul class="simple">
<li>demodulator (demod)</li>
<li>decoder (ondd)</li>
<li>web based interface (librarian)</li>
</ul>
<p>Let&#8217;s start screen as root. We will name this session &#8216;outernet&#8217; so we can
refer to it in future.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ sudo screen -S outernet
</pre></div>
</div>
<div class="section" id="running-the-demodulator">
<h3>Running the demodulator<a class="headerlink" href="#running-the-demodulator" title="Permalink to this headline">¶</a></h3>
<p>In the first shell, let&#8217;s start the demodulator. We first need to find out the
profile we should use. To do this run <code class="docutils literal"><span class="pre">demod-profile</span></code> without any arguments.
Once we know the profile name (in this example, we will use &#8216;global&#8217;), we run
the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># demod-profile global</span>
</pre></div>
</div>
</div>
<div class="section" id="running-the-decoder">
<h3>Running the decoder<a class="headerlink" href="#running-the-decoder" title="Permalink to this headline">¶</a></h3>
<p>Now we need to create another shell with Ctrl-A Ctrl-C. In the new shell, we
will run the decoder. Refer to the download and download cache locations we
decided on in the :doc:install section.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># ondd -V -c /var/spool/ondd -o /srv/downloads -D /var/run/ondd.data</span>
</pre></div>
</div>
</div>
<div class="section" id="starting-the-indexer">
<h3>Starting the indexer<a class="headerlink" href="#starting-the-indexer" title="Permalink to this headline">¶</a></h3>
<p>After creating a new shell with Ctrl-A Ctrl-C, the indexer is started using the
<code class="docutils literal"><span class="pre">fsal</span></code> command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># fsal --conf /etc/fsal.ini</span>
</pre></div>
</div>
</div>
<div class="section" id="starting-the-web-ui">
<h3>Starting the web UI<a class="headerlink" href="#starting-the-web-ui" title="Permalink to this headline">¶</a></h3>
<p>We create yet another shell with Ctrl-A Ctrl-C. In this shell, we will start
Librarian:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># librarian --conf /etc/librarian.ini</span>
</pre></div>
</div>
<p>Within less than a minute, the server will start responding on the port 80.</p>
</div>
<div class="section" id="detaching-from-the-screen-session">
<h3>Detaching from the screen session<a class="headerlink" href="#detaching-from-the-screen-session" title="Permalink to this headline">¶</a></h3>
<p>After starting all the software, we may now detach from the screen session by
using the Ctrl-A Ctrl-D combination.</p>
<p>At some later time, if we wish to see what the programs are doing, we can
reattach to the session with <code class="docutils literal"><span class="pre">screen</span> <span class="pre">-rDS</span> <span class="pre">outernet</span></code>.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="install.html" class="btn btn-neutral" title="Software installation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Outernet Inc &lt;apps@outernet.is&gt;.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.dev1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>